<h1>Admin, list of reservations</h1>

<h1>My reservations</h1>

<% @reservations.each do |reservation| %>
    <p>Auto reservado <%= reservation.car_id %></p>
    <%= link_to reservation_path(reservation.id) do %>
        <button>Ver mas</button>
    <% end %>
<% end %>


<div class="text-black text-center pt-20 items-center justify-center  flex-col h-screen w-full">
    <h1 class="text-4xl font-bold mb-5">Mis reservas</h1>

    <table class="min-w-full bg-white border border-gray-300">
      <thead>
        <tr class="bg-gray-100">
          <th class="py-2 px-4 border-b">ID del Auto</th>
          <th class="py-2 px-4 border-b">ID de Usuario</th>
          <th class="py-2 px-4 border-b">Nombre del Reservante</th>
          <th class="py-2 px-4 border-b">Fecha de Inicio</th>
          <th class="py-2 px-4 border-b">Fecha Final</th>
          <th class="py-2 px-4 border-b">Precio Total</th>
          <% if Current.user&.admin %>
          <th class="py-2 px-4 border-b">Acciones</th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <%= render partial: 'reservation_row', collection: @reservations %>
      </tbody>
    </table>
  </div>




  <div id="ventanaEditar" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-8 rounded-md">
      <label class="block text-sm font-bold mb-2">Seleccionar permiso:</label>
      <select class="w-full p-2 mb-4 border border-gray-300 rounded-md" id="selectPermiso">
        <option value="pendiente">Pendiente</option>
        <option value="finalizado">Finalizado</option>
      </select>
      <div class="flex justify-end">
        <button class="bg-zinc-800 text-white py-1 px-2 rounded-full font-bold mr-2 hover:bg-blue-800"
          onclick="cerrarVentanaEditar()">Guardar</button>
        <button
          class="border border-zinc-800 text-black py-1 px-2 rounded-full font-bold hover:text-white hover:bg-red-600  hover:border-red-600"
          onclick="cerrarVentanaEditar()">Cancelar</button>
      </div>
    </div>
  </div>
  <div id="ventanaConfirmacion"
    class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-8 rounded-md">
      <p class="mb-4">¿Estás seguro de que deseas eliminar esta reserva?</p>
      <div class="flex justify-end">
        <button class="bg-zinc-800 text-white py-1 px-2 rounded-full font-bold mr-2 hover:bg-blue-800"
          onclick="cerrarVentanaConfirmacion()">Confirmar</button>
        <button
          class="border border-zinc-800 text-black py-1 px-2 rounded-full font-bold hover:text-white hover:bg-red-600  hover:border-red-600"
          onclick="cerrarVentanaConfirmacion()">Cancelar</button>
      </div>
    </div>
  </div>


  <% if Current.user&.admin %>
    Listado de todas las reservas para el admin
  <% end %>

  <script>
    function mostrarVentanaEditar() {
      document.getElementById('ventanaEditar').style.display = 'flex';
    }

    function cerrarVentanaEditar() {
      document.getElementById('ventanaEditar').style.display = 'none';
    }

    function mostrarVentanaConfirmacion() {
      document.getElementById('ventanaConfirmacion').style.display = 'flex';
    }

    function cerrarVentanaConfirmacion() {
      document.getElementById('ventanaConfirmacion').style.display = 'none';
    }
  </script>